# `useSetComputedResults`

## Purpose
`useSetComputedResults` is a custom React hook designed to compute and update the results of a simulation based on specific categories and metrics. This hook optimizes performance by ensuring that results are recalculated only when necessary, and it provides a status indicator for initialization.

## Usage

### Importing the Hook
To use `useSetComputedResults` in your component, first import it:

```typescript
import { useSetComputedResults } from '@/publicodes-state/hooks/simulationProvider/useSetComputedResults';
```

### Using the Hook
Invoke `useSetComputedResults` within your functional component to compute and update simulation results:

```typescript
function MyComponent() {
  const { isInitialized } = useSetComputedResults({
    categories: ['category1', 'category2'],
    isEngineInitialized: true,
    safeEvaluate: (ruleName, metric) => {/* evaluation logic */}
  });

  if (!isInitialized) {
    return <div>Loading...</div>;
  }

  return <div>Simulation results are ready.</div>;
}
```

### Parameters
- `categories`: An array of category names for which results need to be computed.
- `isEngineInitialized`: A boolean indicating if the simulation engine is initialized.
- `safeEvaluate`: A function that takes a `ruleName` and a `metric` as arguments and returns the computed result.

### Return Value
- `isInitialized`: A boolean that indicates whether the hook has successfully initialized and computed the results.

## Performance Considerations
This hook is optimized to recalculate results only when necessary, improving overall performance. It uses React's `useMemo` and `useEffect` hooks internally to manage computations efficiently.

## Error Handling
The hook includes error handling to manage potential issues during the evaluation process. If an error occurs, it will be logged to the console, allowing for easier debugging.

## Example with Error Handling
```typescript
function SimulationComponent() {
  const { isInitialized } = useSetComputedResults({
    categories: ['energy', 'transport'],
    isEngineInitialized: true,
    safeEvaluate: (ruleName, metric) => {
      try {
        // Custom evaluation logic
        return computedValue;
      } catch (error) {
        console.error(`Error evaluating ${ruleName}:`, error);
        return null;
      }
    },
  });

  if (!isInitialized) {
    return <div>Loading simulation data...</div>;
  }

  return <div>Simulation results are ready for analysis.</div>;
}
