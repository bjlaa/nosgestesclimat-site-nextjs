# UserContext

The `UserContext` is a React context that manages user-related state and actions throughout the application. It centralizes user information, tutorials, simulations, and migration instructions.

## Key Features

- Manages user details (name, email, region, organization)
- Handles tutorial visibility
- Stores and manages user simulations
- Provides migration instructions for legacy data

## Usage

### Provider

Wrap your application or specific components with the `UserProvider`:

```tsx
import UserProvider from '@/publicodes-state/providers/userProvider'

function App() {
  return (
    <UserProvider
      storageKey="yourStorageKey"
      initialRegion={{ code: 'regionCode', name: 'regionName' }}
      migrationInstructions={{ keysToMigrate: {}, valuesToMigrate: {} }}
    >
      <YourComponent />
    </UserProvider>
  )
}
```

### Consumer

Use the `useUser` hook to access and manipulate the context values:

```tsx
import useUser from '@/publicodes-state/hooks/user/useUser'

function YourComponent() {
  const {
    user,
    updateName,
    updateEmail,
    updateRegion,
    updateUserOrganisation,
    tutorials,
    showTutorial,
    hideTutorial,
    simulations,
    deleteSimulation,
  } = useUser()

  // Example usage
  const handleNameChange = (e) => {
    updateName(e.target.value)
  }

  return (
    <div>
      <h1>{user.name}</h1>
      <input type="text" value={user.name} onChange={handleNameChange} />
    </div>
  )
}
```

## Context Values

- `user`: Current user information
- `setUser`: Function to update the user state
- `tutorials`: List of tutorials seen by the user
- `setTutorials`: Function to update the tutorials state
- `simulations`: List of user simulations
- `setSimulations`: Function to update the simulations state
- `currentSimulationId`: ID of the current simulation
- `setCurrentSimulationId`: Function to update the current simulation ID
- `migrationInstructions`: Instructions for migrating old local storage data

## Related Hooks

- `useUser`: Provides access to user-related state and actions
- `usePersistentUser`: Manages persistent user data in local storage
- `usePersistentSimulations`: Manages persistent simulations data in local storage
- `usePersistentTutorials`: Manages persistent tutorials data in local storage
- `useUpdateOldLocalStorage`: Handles updating old local storage data

## Documentation

For more detailed information about the calculation methodologies and integration guides, refer to the following resources:

- [Nos Gestes Climat Documentation](https://nosgestesclimat.fr/documentation/)
- [Integration Guide](https://accelerateur-transition-ecologique-ademe.notion.site/Int-grer-Nos-Gestes-Climat-en-iframe-abdeb175baf84143922006964d80348c)
- [Technical Documentation](https://accelerateur-transition-ecologique-ademe.notion.site/c57ea7dfc6214660a2d6a6a3addb88bd?v=d60b4b87e8ea4bee8e3c501bea75afc9)

## Contributing

We welcome contributions to improve Nos Gestes Climat. If you have any feedback or suggestions, please refer to our [contribution guidelines](https://nosgestesclimat.fr/contact).

This improved documentation provides a more structured and comprehensive overview of the `UserContext`, its usage, and related resources. It also includes links to external documentation and contribution guidelines, making it easier for developers to understand and use the context effectively.